<html>
<head>
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
</head>
<body id="writePageBox">
    <script>
        var CONTENT_URL = '../CONTENT/index.txt';
        var storedText;

        fetch(CONTENT_URL)
          .then(function(response) {
            response.text().then(function(text) {
              storedText = text;
            });
          });
    </script>
    <py-config>
        [[fetch]]
        files=['./main.py']
    </py-config>
    <py-script>
        import main
        import js
        from js import document as Doc

        this_content = js.storedText

        html = '<div><strong>foo</strong></div>'
        thisPage = Doc.getElementById('writePageBox')
        #thisPage.innerHTML = html
        #thisPage.innerHTML = main.getPage()
        thisPage.innerHTML = main.pageFromContent(this_content)
    </py-script>
</body>
</html>
